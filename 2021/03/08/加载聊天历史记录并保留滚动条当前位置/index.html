<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>加载聊天历史记录并保留滚动条当前位置 | 淳淳同学的个人博客</title><meta name="author" content="淳淳同学"><meta name="copyright" content="淳淳同学"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="加载聊天历史记录并保留滚动条当前位置">
<meta property="og:type" content="article">
<meta property="og:title" content="加载聊天历史记录并保留滚动条当前位置">
<meta property="og:url" content="https://leedebug.github.io/2021/03/08/%E5%8A%A0%E8%BD%BD%E8%81%8A%E5%A4%A9%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E5%B9%B6%E4%BF%9D%E7%95%99%E6%BB%9A%E5%8A%A8%E6%9D%A1%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE/index.html">
<meta property="og:site_name" content="淳淳同学的个人博客">
<meta property="og:description" content="加载聊天历史记录并保留滚动条当前位置">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210413164038.png">
<meta property="article:published_time" content="2021-03-08T04:35:19.000Z">
<meta property="article:modified_time" content="2024-12-30T05:49:35.068Z">
<meta property="article:author" content="淳淳同学">
<meta property="article:tag" content="Vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210413164038.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "加载聊天历史记录并保留滚动条当前位置",
  "url": "https://leedebug.github.io/2021/03/08/%E5%8A%A0%E8%BD%BD%E8%81%8A%E5%A4%A9%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E5%B9%B6%E4%BF%9D%E7%95%99%E6%BB%9A%E5%8A%A8%E6%9D%A1%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE/",
  "image": "https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210413164038.png",
  "datePublished": "2021-03-08T04:35:19.000Z",
  "dateModified": "2024-12-30T05:49:35.068Z",
  "author": [
    {
      "@type": "Person",
      "name": "淳淳同学",
      "url": "https://leedebug.github.io/"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://leedebug.github.io/2021/03/08/%E5%8A%A0%E8%BD%BD%E8%81%8A%E5%A4%A9%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E5%B9%B6%E4%BF%9D%E7%95%99%E6%BB%9A%E5%8A%A8%E6%9D%A1%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":true},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Failed',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '加载聊天历史记录并保留滚动条当前位置',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 5.4.2"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">37</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-list"></i><span> 关于淳淳同学</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/resume.html"><i class="fa-fw fas fa-file-word"></i><span> 电子简历</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://juejin.cn/user/2189882894323975"><i class="fa-fw fas fa-blog"></i><span> 掘金社区</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://github.com/LeeDebug"><i class="fa-fw fab fa-github"></i><span> GitHub</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://gitlab.com/Leevue"><i class="fa-fw fab fa-gitlab"></i><span> GitLab</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://gitee.com/leejs"><i class="fa-fw fab fa-git"></i><span> Gitee</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://weibo.com/p/1005053297895847"><i class="fa-fw fab fa-weibo"></i><span> 微博</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210413164038.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">淳淳同学的个人博客</span></a><a class="nav-page-title" href="/"><span class="site-name">加载聊天历史记录并保留滚动条当前位置</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fa fa-list"></i><span> 关于淳淳同学</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/resume.html"><i class="fa-fw fas fa-file-word"></i><span> 电子简历</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://juejin.cn/user/2189882894323975"><i class="fa-fw fas fa-blog"></i><span> 掘金社区</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://github.com/LeeDebug"><i class="fa-fw fab fa-github"></i><span> GitHub</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://gitlab.com/Leevue"><i class="fa-fw fab fa-gitlab"></i><span> GitLab</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://gitee.com/leejs"><i class="fa-fw fab fa-git"></i><span> Gitee</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://weibo.com/p/1005053297895847"><i class="fa-fw fab fa-weibo"></i><span> 微博</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">加载聊天历史记录并保留滚动条当前位置</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2021-03-08T04:35:19.000Z" title="Created 2021-03-08 12:35:19">2021-03-08</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-12-30T05:49:35.068Z" title="Updated 2024-12-30 13:49:35">2024-12-30</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Vue/">Vue</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p>在聊天框中，加载历史消息肯定是往消息的上面去加载，即对应数组的<code>Array.unshift()</code>操作，此时默认滚动条会回到顶部，所以我们需要重置滚动条的位置</p>
</blockquote>
<h1 id="Vue中代码实现"><a href="#Vue中代码实现" class="headerlink" title="Vue中代码实现"></a>Vue中代码实现</h1><p>首先记录加载历史前，滚动条的位置<code>scrollHeight</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="attr">scrollHeight</span>: number = (<span class="variable language_">document</span> <span class="keyword">as</span> any).<span class="title function_">getElementById</span>(<span class="string">&#x27;messageBox&#x27;</span>).<span class="property">scrollHeight</span>;</span><br></pre></td></tr></table></figure>

<p>加载历史消息</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; outMsg.<span class="property">list</span>.<span class="property">length</span>; i++) &#123;</span><br><span class="line">  <span class="comment">// todo sth, ex: 消息处理</span></span><br><span class="line">  activeList.<span class="title function_">unshift</span>(list[i]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>滚动到原来的位置</p>
<p>注：因为我是在vue环境下，需要确保页面已经渲染完，再滚动到加载前的位置，所以使用<code>Vue.nextTick()</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">nextTick</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> <span class="attr">scrollDom</span>: any = (<span class="variable language_">document</span> <span class="keyword">as</span> any).<span class="title function_">getElementById</span>(<span class="string">&#x27;messageBox&#x27;</span>);</span><br><span class="line">  scrollDom.<span class="property">scrollTop</span> = (scrollDom.<span class="property">scrollHeight</span> - scrollHeight);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h1 id="jQuery代码实现"><a href="#jQuery代码实现" class="headerlink" title="jQuery代码实现"></a>jQuery代码实现</h1><p>原理同上，直接上代码</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> scrollHeight = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;messageBox&quot;</span>).<span class="property">scrollHeight</span>;</span><br><span class="line">$(<span class="string">&quot;#messageBox&quot;</span>).<span class="title function_">scrollTop</span>(<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;messageBox&quot;</span>).<span class="property">scrollHeight</span> - scrollHeight);</span><br></pre></td></tr></table></figure>

<h1 id="祝君无Bug"><a href="#祝君无Bug" class="headerlink" title="祝君无Bug~"></a>祝君无Bug~</h1></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="https://leedebug.github.io">淳淳同学</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="https://leedebug.github.io/2021/03/08/%E5%8A%A0%E8%BD%BD%E8%81%8A%E5%A4%A9%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E5%B9%B6%E4%BF%9D%E7%95%99%E6%BB%9A%E5%8A%A8%E6%9D%A1%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE/">https://leedebug.github.io/2021/03/08/%E5%8A%A0%E8%BD%BD%E8%81%8A%E5%A4%A9%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95%E5%B9%B6%E4%BF%9D%E7%95%99%E6%BB%9A%E5%8A%A8%E6%9D%A1%E5%BD%93%E5%89%8D%E4%BD%8D%E7%BD%AE/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles on this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless otherwise stated.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Vue/">Vue</a></div><div class="post-share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210413164038.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>Related Articles</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2021/05/27/Vue3%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6-v3-carousel/" title="【个人开源】Vue3 轮播组件: v3-carousel"><img class="cover" src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210527141809.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-05-27</div><div class="info-item-2">【个人开源】Vue3 轮播组件: v3-carousel</div></div><div class="info-2"><div class="info-item-1"> 引水方知开源不易 与朋友首次开源了一个轮播插件，希望大家积极品尝  介绍基于 vue3 composition api 编写的轮播插件，多种属性适配，轮播内容 可完全自定义，基本可以满足大部分的轮播需求。 基本功能介绍：  是否开启自动轮播，自定义轮播时间 鼠标移入后暂停轮播，鼠标移出后重置轮播 点击 左侧/右侧 切换按钮，手动切换 点击 底部轮播指示器，手动切换 切换按钮 与 轮播指示器，可设置 hover 展示 左侧切换向左滚动，右侧切换向右滚动 …  在线Demo：正在制作… 安装1npm install v3-carousel or 1yarn add v3-carousel 使用main.js 123456import &#123; createApp &#125; from &quot;vue&quot;;import App from &quot;./App.vue&quot;;import Carousel from &quot;v3-carousel&quot;; // 引入const app =...</div></div></div></a><a class="pagination-related" href="/2021/07/05/Vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB%EF%BC%88%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%89/" title="Vue源码解读（知识点总结）"><img class="cover" src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210706123716.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-05</div><div class="info-item-2">Vue源码解读（知识点总结）</div></div><div class="info-2"><div class="info-item-1"> 为了方便自己对知识点的巩固和理解，整理了李永宁大佬 12 篇《Vue源码解读》的文末知识点总结，在这里可以一览天下。如果想看详细文章，可点击标题下方的“阅读原文”即可。  （1）前言阅读原文 （2）Vue 初始化过程阅读原文 Vue 的初始化过程（new Vue(options)）都做了什么？ 处理组件配置项 初始化根组件时进行了选项合并操作，将全局配置合并到根组件的局部配置上 初始化每个子组件时做了一些性能优化，将组件配置对象上的一些深层次属性放到 vm.$options 选项中，以提高代码的执行效率   初始化组件实例的关系属性，比如 $parent、$children、$root、$refs 等 处理自定义事件 调用 beforeCreate 钩子函数 初始化组件的 inject 配置项，得到 ret[key] = val 形式的配置对象，然后对该配置对象进行响应式处理，并代理每个 key 到 vm 实例上 数据响应式，处理 props、methods、data、computed、watch 等选项 解析组件配置项上的 provide 对象，将其挂载到...</div></div></div></a><a class="pagination-related" href="/2021/02/06/viewerjs%E6%9F%A5%E7%9C%8B%E5%A4%A7%E5%9B%BE%E7%BB%84%E4%BB%B6/" title="viewerjs查看大图组件"><img class="cover" src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210225140807.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-02-06</div><div class="info-item-2">viewerjs查看大图组件</div></div><div class="info-2"><div class="info-item-1"> 因为项目没有使用element-ui，所以不能使用自带的el-image组件进行大图查看，遂找了一个单独的组件  安装1npm install viewerjs  使用案例12345678910111213&lt;!-- 单个图片查看 --&gt;&lt;div&gt;  &lt;img id=&quot;image&quot; src=&quot;picture.jpg&quot; alt=&quot;Picture&quot;&gt;&lt;/div&gt;&lt;!-- 多个图片查看 --&gt;&lt;div&gt;  &lt;ul id=&quot;images&quot;&gt;    &lt;li&gt;&lt;img src=&quot;picture-1.jpg&quot; alt=&quot;Picture 1&quot;&gt;&lt;/li&gt;    &lt;li&gt;&lt;img src=&quot;picture-2.jpg&quot; alt=&quot;Picture 2&quot;&gt;&lt;/li&gt;   ...</div></div></div></a><a class="pagination-related" href="/2020/12/27/vue3%E7%9A%84%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F%E9%92%A9%E5%AD%90/" title="vue3的生命周期钩子"><img class="cover" src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20201227213102.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-12-27</div><div class="info-item-2">vue3的生命周期钩子</div></div><div class="info-2"><div class="info-item-1"> vue3的生命周期钩子与vue2的差不多，只是命名和调用上有一些诧异，详见下文  与 2.x 版本生命周期相对应的 Composition API   Vue 2.x Vue 3.x    beforeCreate 改用 setup()   created 改用 setup()   beforeMount onBeforeMount   mounted onMounted   beforeUpdate onBeforeUpdate   updated onUpdated   beforeDestroy onBeforeUnmount   destroyed onUnmounted   errorCaptured onErrorCaptured   新增的钩子函数除了和 2.x 生命周期等效项之外，Composition API 还提供了以下调试钩子函数：  onRenderTracked onRenderTriggered  祝君无Bug~</div></div></div></a><a class="pagination-related" href="/2020/11/07/%E4%B8%AD%E5%A4%AE%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF%E6%8F%92%E4%BB%B6vue-bus-ts/" title="中央事件总线插件vue-bus-ts"><img class="cover" src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20201111165942.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2020-11-07</div><div class="info-item-2">中央事件总线插件vue-bus-ts</div></div><div class="info-2"><div class="info-item-1"> 项目中难免会遇到非父子组件之间的传参与通信问题，遂整理此文。  简介vue-bus-ts 是一款支持在ts环境下使用的全局事件总线插件。 安装及使用方法安装1npm i -S vue-bus-ts  注册安装后需要在main.ts中引入并注册，挂载到全局的Vue实例上即可 123456789101112# main.tsimport Vue from &#x27;vue&#x27;;import EventBus from &#x27;vue-bus-ts&#x27;;Vue.use(EventBus);var bus = new EventBus.Bus();new Vue(&#123;  bus,  render: (h) =&gt; h(App),&#125;).$mount(&#x27;#app&#x27;);  注册事件在调用事件前，需要实现注册该事件，否则不会生效 一般写在vue文件的mounted或者created生命周期中 123456# *.vue  var eventId = this.$bus.$on(&#x27;event_name&#x27;,...</div></div></div></a><a class="pagination-related" href="/2021/01/17/%E5%AE%89%E5%8D%93%E5%BE%AE%E4%BF%A1%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%ADtype-file%E7%9A%84input%E6%A1%86%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8/" title="安卓微信浏览器中type&#x3D;file的input框无法使用"><img class="cover" src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210225125447.png" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-17</div><div class="info-item-2">安卓微信浏览器中type&#x3D;file的input框无法使用</div></div><div class="info-2"><div class="info-item-1"> 如果使用html的input框设为type=file来选择文件，在安卓的微信中打开页面时，会提示暂无可使用应用等错误提示  解决方案若要选择图片，需将input框的accept属性设为image/*；若要选择文件，需将此属性设为 空 1234567&lt;input  v-show=&quot;false&quot;  :ref=&quot;el =&gt; &#123; if (el) uploadRefs = el &#125;&quot;  type=&quot;file&quot;  :accept=&quot;acceptFileTypeArr&quot;  @change=&quot;handleUploadFunc&quot;/&gt; 123456789const acceptFileTypeArr: any = computed(() =&gt; &#123; // 当前支持上传类型  if (uploadType.value === &#x27;image&#x27;) &#123;    return &#x27;image/*&#x27;; ...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">淳淳同学</div><div class="author-info-description">个人博客</div><div class="site-data"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">37</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">16</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">15</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/LeeDebug" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:961150665@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Vue%E4%B8%AD%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.</span> <span class="toc-text">Vue中代码实现</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#jQuery%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">2.</span> <span class="toc-text">jQuery代码实现</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%A5%9D%E5%90%9B%E6%97%A0Bug"><span class="toc-number">3.</span> <span class="toc-text">祝君无Bug~</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Posts</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/12/30/hello-world/" title="Hello World"><img src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20201111170450.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hello World"/></a><div class="content"><a class="title" href="/2024/12/30/hello-world/" title="Hello World">Hello World</a><time datetime="2024-12-30T05:49:35.053Z" title="Created 2024-12-30 13:49:35">2024-12-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/07/05/Vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB%EF%BC%88%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%89/" title="Vue源码解读（知识点总结）"><img src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210706123716.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue源码解读（知识点总结）"/></a><div class="content"><a class="title" href="/2021/07/05/Vue%E6%BA%90%E7%A0%81%E8%A7%A3%E8%AF%BB%EF%BC%88%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93%EF%BC%89/" title="Vue源码解读（知识点总结）">Vue源码解读（知识点总结）</a><time datetime="2021-07-05T15:55:11.000Z" title="Created 2021-07-05 23:55:11">2021-07-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/27/Vue3%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6-v3-carousel/" title="【个人开源】Vue3 轮播组件: v3-carousel"><img src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210527141809.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="【个人开源】Vue3 轮播组件: v3-carousel"/></a><div class="content"><a class="title" href="/2021/05/27/Vue3%E8%BD%AE%E6%92%AD%E7%BB%84%E4%BB%B6-v3-carousel/" title="【个人开源】Vue3 轮播组件: v3-carousel">【个人开源】Vue3 轮播组件: v3-carousel</a><time datetime="2021-05-27T04:55:02.000Z" title="Created 2021-05-27 12:55:02">2021-05-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/05/24/2021%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/" title="2021前端知识点总结"><img src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/cover/default_bg.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="2021前端知识点总结"/></a><div class="content"><a class="title" href="/2021/05/24/2021%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E6%80%BB%E7%BB%93/" title="2021前端知识点总结">2021前端知识点总结</a><time datetime="2021-05-24T10:17:08.000Z" title="Created 2021-05-24 18:17:08">2021-05-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/04/08/JavaScript%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7/" title="JavaScript运算符优先级"><img src="https://cdn.jsdelivr.net/gh/LeeDebug/PicGo/img/20210422112132.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="JavaScript运算符优先级"/></a><div class="content"><a class="title" href="/2021/04/08/JavaScript%E8%BF%90%E7%AE%97%E7%AC%A6%E4%BC%98%E5%85%88%E7%BA%A7/" title="JavaScript运算符优先级">JavaScript运算符优先级</a><time datetime="2021-04-08T02:11:48.000Z" title="Created 2021-04-08 10:11:48">2021-04-08</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By 淳淳同学</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Reading Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light and Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle Between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Settings"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back to Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>